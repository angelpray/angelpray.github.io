

<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="This is JC's blog"/>








  <link rel="alternate" href="/default" title="Janro-Cheung">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1" />



<link rel="canonical" href="https://angelpray.github.io/2019/01/02/learnMongodb/"/>


<meta name="description" content="mongoDB shell就是可以接受用户输入命令的程序。将shell分为两类：命令行与图形界面。命令行壳层提供一个命令行界面（CLI）；而图形壳层提供一个图形用户界面（GUI）。  mongodb是一个面向文档（document-oriented）的数据库，而不是关系型数据库。不采用关系模型是为了获得更好的扩展性。  没有预定义模式（predefined schema）；文档的键key和值val">
<meta property="og:type" content="article">
<meta property="og:title" content="Janro-Cheung">
<meta property="og:url" content="https://angelpray.github.io/2019/01/02/learnMongodb/index.html">
<meta property="og:site_name" content="Janro-Cheung">
<meta property="og:description" content="mongoDB shell就是可以接受用户输入命令的程序。将shell分为两类：命令行与图形界面。命令行壳层提供一个命令行界面（CLI）；而图形壳层提供一个图形用户界面（GUI）。  mongodb是一个面向文档（document-oriented）的数据库，而不是关系型数据库。不采用关系模型是为了获得更好的扩展性。  没有预定义模式（predefined schema）；文档的键key和值val">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2019-01-05T11:42:19.477Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Janro-Cheung">
<meta name="twitter:description" content="mongoDB shell就是可以接受用户输入命令的程序。将shell分为两类：命令行与图形界面。命令行壳层提供一个命令行界面（CLI）；而图形壳层提供一个图形用户界面（GUI）。  mongodb是一个面向文档（document-oriented）的数据库，而不是关系型数据库。不采用关系模型是为了获得更好的扩展性。  没有预定义模式（predefined schema）；文档的键key和值val">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title>  - Janro-Cheung </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">Janro-Cheung</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                所有文章
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                关于
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          
        
      </h1>

      <time class="post-time">
          1月 02 2019
      </time>
    </header>



    
            <div class="post-content">
            <h1 id="mongoDB"><a href="#mongoDB" class="headerlink" title="mongoDB"></a>mongoDB</h1><ul>
<li><p>shell就是可以接受用户输入命令的程序。将shell分为两类：命令行与图形界面。命令行壳层提供一个命令行界面（CLI）；而图形壳层提供一个图形用户界面（GUI）。</p>
</li>
<li><p>mongodb是一个面向文档（document-oriented）的数据库，而不是关系型数据库。不采用关系模型是为了获得更好的扩展性。</p>
</li>
<li><p>没有预定义模式（predefined schema）；文档的键key和值value不再是固定的类型和大小。</p>
</li>
<li><p>扩展数据库：纵向扩展scale up和横向扩展scale out。前者是用更好的服务器。后者是将数据分散到更多机器上。mongodb使用横向扩展。</p>
</li>
</ul>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><ul>
<li><p><code>文档</code>是mongodb中数据的基本单元，类似于关系数据库管理找那个的行。</p>
</li>
<li><p>集合collection可以看做是一个拥有动态模式dynamic schema的表。</p>
</li>
<li><p>mongodb的一个实例可以拥有多个相互独立的数据库，每个数据库都拥有自己的集合。</p>
</li>
<li><p>每个文档都有一个特殊的键“_id”，这个键在文档所属的集合是唯一的。</p>
</li>
<li><p>mongodb自带了一个简单但功能强大的JavaScript shell，用于管理mongodb的实例或数据操作。</p>
</li>
</ul>
<p>##文档</p>
<ul>
<li><p><strong>文档就是键值对的一个有序集</strong>。大多数编程语言都有相同的数据结构。映射map、散列hash、字典dictionnary。</p>
</li>
<li><p><strong>文档的键是字符串</strong>。除了少数例外情况，键可以使用任意UTF-8字符。键不能包含\0（空字符），这个字符用于表示键的结尾。.和$具有特殊意义。</p>
</li>
<li><p>mongodb区分类型和大小写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类型</span></span><br><span class="line">&#123;<span class="string">"foo"</span>: <span class="number">3</span>&#125;</span><br><span class="line">&#123;<span class="string">"foo"</span>: <span class="string">"3"</span>&#125;</span><br><span class="line"><span class="comment">// 大小写</span></span><br><span class="line">&#123;<span class="string">"foo"</span>: <span class="number">3</span>&#125;</span><br><span class="line">&#123;<span class="string">"Foo"</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mongodb文档中不能有重复的键。</p>
</li>
<li><p>文档中的键值对是有序的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 键值对顺序</span></span><br><span class="line">&#123;<span class="string">"x"</span>: <span class="number">1</span>, <span class="string">"y"</span>: <span class="number">2</span>&#125;</span><br><span class="line">&#123;<span class="string">"y"</span>: <span class="number">2</span>, <span class="string">"x"</span>: <span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p><strong>集合就是一组文档</strong>，文档可以比喻成行，集合则相当于一张表。</p>
<h3 id="动态模式"><a href="#动态模式" class="headerlink" title="动态模式"></a>动态模式</h3><p><strong>集合是动态模式的</strong>，也就是说集合中的文档可以是各式各样的，可以防止任何文档。为了提高维护性和高效，需要把相关类型的文档组织在一起，尽管mongodb对此没有强制要求。</p>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p><strong>集合使用名称进行标识。</strong>集合可以是任意utf-8字符串。除了某些例外情况。</p>
<p>组织集合的一种惯例是使用”.”分隔不同命名空间的子集合。</p>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><ul>
<li><p><strong>在mongodb中，多个文档组成集合，多个集合组成数据库。多个数据库组成mongodb实例。</strong></p>
</li>
<li><p>数据库也通过名称来标识，满足条件的utf-8字符串。类似集合。</p>
</li>
<li><p><strong>数据库最终会变成文件系统里的文件，而数据库名就是响应的文件名，这是数据库名有限制的原因</strong></p>
</li>
<li><p>把数据库名添加到集合名前得到集合的完全限定名，即明明空间namespace。例如，要使用cms数据库中blog.posts集合，这个集合的命名空间就是cms.blog.posts</p>
</li>
</ul>
<h2 id="启动mongodb"><a href="#启动mongodb" class="headerlink" title="启动mongodb"></a>启动mongodb</h2><ol>
<li>mongod –dbpath “dir”</li>
</ol>
<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><ol>
<li><p>mongodb自带JavaScript shell，可以在shell中使用命令行和mongodb实例交互。启动shell <code>mongo</code></p>
</li>
<li><p>shell是一个功能完备的js解释器，可以运行任意JavaScript程序。</p>
</li>
<li><p>shell会连接到mongodb服务器的test数据库，并将数据库连接赋值给全局变量db，这个变量是通过shell访问mongodb的主要入口点。</p>
</li>
<li><p>查看当前指向哪个数据库，使用db命令：<code>db</code></p>
</li>
<li><p>通过db变量可以 访问其中的集合。如db.blog返回当前数据库的blog集合。</p>
</li>
<li><p>shell还包含一些非js语法的扩展。</p>
</li>
<li><p>切换数据库 : <code>use database</code></p>
<h2 id="shell-中的基本操作"><a href="#shell-中的基本操作" class="headerlink" title="shell 中的基本操作"></a>shell 中的基本操作</h2></li>
<li><p>4个基本操作：创建、读取、更新、删除（CRUD操作）</p>
</li>
</ol>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>创建：<code>insert(doc)</code>函数将一个文档添加到集合中。</p>
<h3 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h3><p><code>find(),findOne()</code>方法可以用于查询集合里的文档。后者只查看一个文档。接收一个查询文档作为限定条件，这样就可以查询符合一定条件的文档。</p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>使用<code>update</code>修改，update介绍至少两个参数：限定条件（匹配待更新的文档），第二个是新的文档。比如，我们需要为文章添加一个评论功能，就增加一个新的键，用于保存评论数组。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">post.comments = [];</span><br><span class="line">db.blog.update(&#123;<span class="string">"title"</span>: <span class="string">"my blog post"</span>&#125;, post);</span><br></pre></td></tr></table></figure></p>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>使用<code>remove</code>方法可将文档从数据库中永久删除。如果没有使用任何参数，它会将集合内的所有文档全部删除。它可以接受一个作为限定条件的文档作为参数。例如：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.blog.remove(&#123;<span class="string">"title"</span>: <span class="string">"my blog post"</span>&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><ol>
<li><p>mongoDB的文档与js对象相近，可以认为它类似于json。但json只支持null、boolean，number，string，array，object类型，表达能力有一定缺陷。</p>
</li>
<li><p>mongodb在保留json键值对特性的基础上添加了其他数据类型。<br>null，表示空值或不存在。<br>布尔型，true，false<br>数值，shell默认使用64位浮点型数值。对于整数型可以使用<code>NumberInt类（4字节带符号）\NumberLong(8字节带符号整数)</code><br>字符串，UTF-8字符串都可以表示为字符串类型<br>日期，**日期被存储为自新纪元以来经过的毫秒数，不存储时区。<br>正则表达式，<br>……</p>
</li>
</ol>
<h3 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h3><p>创建日期对象，应该使用new Date(),而非Date()。</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>数组是一组值，可以作为有序对象（列表，栈或者队列），也能作为无序对象来操作。</p>
<h3 id="内嵌文档"><a href="#内嵌文档" class="headerlink" title="内嵌文档"></a>内嵌文档</h3><p>文档可以作为键的值，这样的文档就是内嵌文档，使用内嵌文档，可以使数据组织方式更加自然。</p>
<h3 id="id和objectID"><a href="#id和objectID" class="headerlink" title="_id和objectID"></a>_id和objectID</h3><ol>
<li><p>在集合里面，每一个文档都有唯一的<code>_id</code>，确保集合里面每个文档都能被唯一标示。</p>
</li>
<li><p>ObjectId是_id的默认类型</p>
</li>
<li><p>自动生成_id，如果插入文档时没有_id键，则系统会自动创建一个。</p>
</li>
</ol>
<h2 id="使用mongoDB-shell"><a href="#使用mongoDB-shell" class="headerlink" title="使用mongoDB shell"></a>使用mongoDB shell</h2><ol>
<li><p>可以将shell连接到任何mongoDB实例。在启动shell时指定机器名和端口名，就可以连接到一台不同的机器。<code>mongo some-host:30000/myDB</code></p>
</li>
<li><p>启动mongo shell 时不连接任何mongod，通过 <code>mongo --nodb</code>启动shell。启动之后可以在需要的时候运行命令得到想要的mongod</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conn = <span class="keyword">new</span> Mongo(<span class="string">"some-host:27017"</span>);</span><br><span class="line">db = conn.getDB(<span class="string">"myDB"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="shell-tips"><a href="#shell-tips" class="headerlink" title="shell tips"></a>shell tips</h3><ol>
<li><p>mongo就是一个简化的JavaScript shell，用JavaScript语法即可得到解析。对于mongoDB特有的功能，shell内置了帮助文档，可以使用help命令查看。<code>help</code></p>
</li>
<li><p>如果想知道一个函数的源码可以直接在shell中输入函数名。<code>db.coll.method</code></p>
</li>
</ol>
<h3 id="使用shell执行脚本"><a href="#使用shell执行脚本" class="headerlink" title="使用shell执行脚本"></a>使用shell执行脚本</h3><ol>
<li><p><code>mongo file.js</code></p>
</li>
<li><p><code>load(file.js)</code>，相对路径，绝对路径【注意加载的js文件有些地方如果无法解析则会出错，比如console在mongo中是无法解析的】</p>
</li>
<li><p>在脚本中可以访问db变量，以及其他全局变量，但是shell辅助函数比如<code>use dbName</code>，不可以在文件中使用</p>
</li>
</ol>
<h3 id="创建-mongorc-js"><a href="#创建-mongorc-js" class="headerlink" title="创建.mongorc.js"></a>创建.mongorc.js</h3><ol>
<li><p><code>.mongorc.js文件</code>会在启动shell时自动运行。</p>
</li>
<li><p>这个文件最常用的是移除那些比较危险的shell辅助函数。</p>
</li>
<li><p>禁止加载 ‘.mongorc.js’</p>
<h3 id="定制shell提示"><a href="#定制shell提示" class="headerlink" title="定制shell提示"></a>定制shell提示</h3></li>
</ol>
<h3 id="编辑复合变量"><a href="#编辑复合变量" class="headerlink" title="编辑复合变量"></a>编辑复合变量</h3><h3 id="集合命名注意事项"><a href="#集合命名注意事项" class="headerlink" title="集合命名注意事项"></a>集合命名注意事项</h3><ol>
<li><p>使用db.collectionName获取一个集合的内容。</p>
</li>
<li><p>为了访问某些无效的JS属性名称，需要用<code>db.getCollection(&quot;version&quot;)</code>来访问响应的集合。</p>
</li>
<li><p>使用[]也可以访问无效属性名称的集合。</p>
</li>
</ol>
<h2 id="创建、更新和删除文档"><a href="#创建、更新和删除文档" class="headerlink" title="创建、更新和删除文档"></a>创建、更新和删除文档</h2><h3 id="插入并保存文档"><a href="#插入并保存文档" class="headerlink" title="插入并保存文档"></a>插入并保存文档</h3><p>插入是向MongoDB中添加数据的基本方法。可以使用<code>insert</code>方法向目标集合插入一个文档。</p>
<ol>
<li><p>批量插入：使用<code>batchInsert</code>函数实现批量插入,它与insert函数非常像，只是它几首的是一个文档数组作为参数</p>
</li>
<li><p>执行批量插入的时候有一个文档插入失败，那么文档之前的所有文档都会成功插入到集合汇总，而这个文档以及之后的所有文档全部插入失败</p>
</li>
<li><p>插入检验：mongodb只对数据进行最基本的检查：检查文档的基本结构，如果没有”_id”字段，就自动增加一个。</p>
</li>
</ol>
<h2 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h2><ol>
<li><p>要删除一些数据：<code>db.coll.remove({opt})</code>,删除数据是永久性的，无法撤销和恢复</p>
</li>
<li><p>删除速度：如果要清空整个集合，使用<code>drop()</code>直接删除集合会更快。</p>
</li>
</ol>
<h2 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h2><ol>
<li><p>使用update方法来更新数据。update有两个参数，一个是查询文档，也就是需要更新的目标文档，另一个是修改器文档，也就是要对找打的文档进行哪些修改。</p>
</li>
<li><p>文档替换：最简单的更新就是用一个新文档完全替换匹配的文档。【为了确保更新时具有相同的_id，最好还是用_id键来匹配】</p>
</li>
<li><p>使用修改器：通常文档只会有一部分要更新，可以使用原子性的更新修改器(update modifier),指定对文档中的某些字段进行更新。</p>
</li>
<li><p><code>&quot;$inc&quot; : {}</code></p>
</li>
<li><p><code>$set : {}</code></p>
</li>
<li><p>数组修改器</p>
</li>
<li><p>把数组当做数据集使用</p>
</li>
<li><p>修改器速度</p>
</li>
<li><p>upsert，是一种特殊的更新，要是没有找到符合更新条件的文档，就会以这个条件和更新文档为基础创建一个新的文档。只需要在update的参数中添加一个true。</p>
</li>
<li><p><code>save()</code>是一个shell 函数，如果文档不存在，自动创建文档，如果文档存在，就更新这个文档。</p>
</li>
<li><p>更新多个文档</p>
</li>
<li><p>返回被更新的文档</p>
</li>
<li><p>写入安全机制</p>
</li>
</ol>
<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><h3 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h3><p>mongodb中使用find进行查询。查询就是返回一个集合中文档的自己，自己范围是0个文档到整个集合。**find()的第一个参数决定了要返回哪些文档，这个参数是一个文档，用于指定查询条件。默认是{}。<code>db.c.find()</code>,如此将批量返回集合c中的所有文档。</p>
<h3 id="指定需要返回的键"><a href="#指定需要返回的键" class="headerlink" title="指定需要返回的键"></a>指定需要返回的键</h3><p>有时候并不需要将文档中所有键/值对都返回，遇到这种情况，可以通过第二个参数来指定想要的键。<br><code>db.daily.find({&quot;age&quot;:20}, {&quot;username&quot;: 1})</code><br>默认情况总是返回 _id键。1代表需要返回这个键，0则代表不需要返回这个键。</p>
<h3 id="查询条件"><a href="#查询条件" class="headerlink" title="查询条件"></a>查询条件</h3><ol>
<li>比较操作符：<code>$lt, $lte, $gt, $gte, $ne</code>分别 对应&lt;, &lt;=, &gt;, &gt;=, !=<br><code>db.users.find({&quot;age&quot;: {&quot;$gte&quot;: 18, &quot;$lte&quot;: 30}})</code></li>
</ol>
<h3 id="OR查询"><a href="#OR查询" class="headerlink" title="OR查询"></a>OR查询</h3><ol>
<li><p>有两种方式进行OR查询，<code>$in</code>可以用来查询一个键的多个值，<code>$or</code>更通用一些，可以在多个键中查询任意的给定值。</p>
</li>
<li><p>当一个键需要与多个值进行匹配的话，就需要用<code>$in</code>操作符，配合使用一个条件数组。<br><code>db.users.find({&quot;registered&quot;: {&quot;$in&quot;: [13, 30,46]}})</code></p>
</li>
<li><p><code>$nin</code>返回与数组所有条件都不匹配的文档。</p>
</li>
<li><p><code>$or</code>接收一个包含所有可能条件的数组作为参数。<br><code>db.user.find({&quot;$or&quot;: [{&quot;age&quot;:20}, {&quot;height&quot;: &quot;50kg&quot;}]})</code></p>
</li>
</ol>
<h3 id="not"><a href="#not" class="headerlink" title="$not"></a>$not</h3><p><code>$not</code>是元条件句，可以用在任何其他条件之上。<br><code>db.users.find({&quot;id_num&quot;: {&quot;$not&quot;: {&quot;$mod&quot;: [5, 1]}}})</code></p>
<h3 id="条件语义"><a href="#条件语义" class="headerlink" title="条件语义"></a>条件语义</h3><p>条件语句是内层文档的键，而修改器则是外层文档的键。</p>
<h3 id="特定类型的查询"><a href="#特定类型的查询" class="headerlink" title="特定类型的查询"></a>特定类型的查询</h3><ol>
<li><p>null，能匹配自身以及不包含这个键的文档</p>
</li>
<li><p>正则表达式：mongodb使用perl兼容的正则表达式PCRE库来匹配正则表达式。</p>
</li>
<li><p>查询数组元素和查询标量值是一样的。<br>有以下操作符：<br><code>$all</code><br><code>$size</code><br><code>$slice</code>:返回某个键匹配的数组元素的一个子集<code>{&quot;comments:&quot; {&quot;$slice&quot;: 10}}</code></p>
</li>
<li><p>查询内嵌文档：查询整个文档，或者只针对其键值对进行查询。</p>
</li>
</ol>
<h3 id="where查询"><a href="#where查询" class="headerlink" title="$where查询"></a>$where查询</h3><p>在其他查询方法都走不通的时候，就要考虑<code>$where</code>子句。用它可以在查询中执行任意的JavaScript。最常见的应用就是比较文档中的两个键是否相等。只有迫不得已再用。</p>
<h3 id="服务器脚本"><a href="#服务器脚本" class="headerlink" title="服务器脚本"></a>服务器脚本</h3><p>服务器端JS很容易受到注入攻击。可以指定在运行mongod时指定<code>--noscripting</code>，完全关闭JS的执行。</p>
<h3 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h3><p>数据库使用游标返回find的执行结果。客户端对游标的实现通常能够对最终结果进行有效的控制。可以限制结果的数量、略过部分结果……还有一些强大的操作。</p>
<ol>
<li><p>最常用的查询选项就是限制返回结果的数量、忽略一定数量的结果以及排序。<code>limit\skip\sort</code></p>
</li>
<li><p>比较顺序：mongoDB处理不同类型的数据是有一定顺序的。</p>
</li>
<li><p>避免使用skip略过大量结果</p>
</li>
<li><p>高级查询选项</p>
</li>
</ol>
<h3 id="数据库命令"><a href="#数据库命令" class="headerlink" title="数据库命令"></a>数据库命令</h3><p>特殊的查询类型：数据库命令database command。文档的创建、更新、删除以及查询这些都是数据库命令的使用范畴。</p>
<ol>
<li><p>删除集合使用<code>drop</code>数据库命令完成<code>db.runCommand({&quot;drop&quot;: &quot;test&quot;})</code>,这就相当于使用shell辅助函数，<code>db.test.drop()</code></p>
</li>
<li><p>在shell中运行db.listCommands()可以看到所有的数据库命令</p>
</li>
</ol>
<h3 id="数据库命令原理"><a href="#数据库命令原理" class="headerlink" title="数据库命令原理"></a>数据库命令原理</h3><ol>
<li>数据库命令总会返回一个ok键的文档，如果ok键时true，则成功，否则就是失败，并且有一个额外的键“errmsg”。</li>
</ol>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2>
            </div>
          

    
      <footer class="post-footer">
		
				

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2019/01/05/MongoDB驱动/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default"></span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2018/12/31/learnRedis/">
        <span class="next-text nav-default"></span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

		<div id="comment"></div>
		<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
		<script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
	<script>
		new Valine({
			el: '#comment',
			notify:false, 
			verify:false, 
			appId: 'jzIDVrftjWXBnBBQ69gkvxur-gzGzoHsz',
			appKey: 'xJDA1U3tIhTEhtKd1QY5w6Cd',
			notify: true, // 邮件提醒!!!
			verify: true, // 验证码			
			placeholder: '说出你的想法！如果你想尽快得到回复的话，请在上方填写你的邮箱和昵称~ヾﾉ≧∀≦)o',
			path:window.location.pathname, 
			avatar:'mm' 
		});
	</script>
    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2017 -
    
    2019
    <span class="footer-author">Janro-Cheung.</span>
    <span class="power-by">
        Use <a class="hexo-link" href="https://hexo.io/">Hexo</a> By<a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear"> polarbear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">回到顶部
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
